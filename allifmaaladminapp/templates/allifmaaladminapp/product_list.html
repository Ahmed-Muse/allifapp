


  <h1>Product List</h1>

  <table id="sortable-table">
    <thead>
      <tr>
        <th>#</th>
        <th onclick="sortTable(0)">Name</th>
        <th onclick="sortTable(1)">Quantity</th>
        <th onclick="sortTable(2)">Unit Cost</th>
        <th onclick="sortTable(3)">Unit Price</th>
        <th>Total Cost</th>
        <th>Total Price</th>
      </tr>
    </thead>
    <tbody>
      {% for product in table_data %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ product.name }}</td>
          <td data-type="number">{{ product.quantity }}</td>
          <td data-type="number">{{ product.unit_cost }}</td>
          <td data-type="number">{{ product.unit_price }}</td>
          <td>{{ product.total_cost }}</td>
          <td>{{ product.total_price }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="7">No products available.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <script>
    function sortTable(columnIndex) {
      const table = document.getElementById("sortable-table");
      const tbody = table.getElementsByTagName("tbody")[0];
      const rows = Array.from(tbody.rows);
      let sortDirection = table.getAttribute("data-sort-direction") || "asc";

      const compare = (rowA, rowB) => {
        const cellA = rowA.cells[columnIndex].textContent.trim();
        const cellB = rowB.cells[columnIndex].textContent.trim();
        const dataTypeA = rowA.cells[columnIndex].dataset.type;
        const dataTypeB = rowB.cells[columnIndex].dataset.type;

        let valueA = cellA;
        let valueB = cellB;

        if (dataTypeA === "number" && dataTypeB === "number") {
          valueA = parseFloat(valueA);
          valueB = parseFloat(valueB);
        }

        if (sortDirection === "asc") {
          if (valueA < valueB) return -1;
          if (valueA > valueB) return 1;
          return 0;
        } else {
          if (valueA > valueB) return -1;
          if (valueA < valueB) return 1;
          return 0;
        }
      };

      rows.sort(compare);

      while (tbody.firstChild) {
        tbody.removeChild(tbody.firstChild);
      }

      rows.forEach(row => tbody.appendChild(row));

      table.setAttribute("data-sort-direction", sortDirection === "asc" ? "desc" : "asc");
    }
  </script>

  <style>
    #sortable-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    #sortable-table th,
    #sortable-table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    #sortable-table th {
      background-color: #f2f2f2;
      cursor: pointer;
    }

    #sortable-table th:hover {
      background-color: #ddd;
    }
  </style>
